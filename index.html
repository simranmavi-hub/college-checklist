<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<meta name="theme-color" content="#0b1320"/>
<title>Checklist â€” All Items</title>
<link rel="stylesheet" href="assets/style.css">
</head>
<body>
<header>
  <div class="wrap">
    <h1>College Moveâ€‘In & Grocery â€” Highâ€‘Protein</h1>
    <nav>
      <a href="index.html" class="active">All Items</a>
      <a href="home.html">Home Setup</a>
      <a href="groceries-pantry.html">Pantry</a>
      <a href="groceries-fridge.html">Fridge</a>
      <a href="groceries-freezer.html">Freezer</a>
      <a href="groceries-condiments.html">Condiments</a>
      <a href="groceries-spices.html">Spices</a>
      <a href="groceries-snacks.html">Breakfast & Snacks</a>
      <a href="hp-addons.html">HP Addâ€‘Ons & Swaps</a>
      <a href="hp-quick.html">HP Quick Builders</a>
    </nav>
    <div class="toolbar">
      <input id="search" type="search" placeholder="Search itemsâ€¦"/>
      <select id="filter" aria-label="Show">
        <option value="all">Show: All</option>
        <option value="home">Home setup only</option>
        <option value="grocery">Groceries only</option>
        <option value="hp">Highâ€‘protein focused</option>
      </select>
      <label class="toggle"><input type="checkbox" id="hpOnly"> Show only highâ€‘protein</label>
      <label class="toggle"><input type="checkbox" id="hpHighlight" checked> Highlight highâ€‘protein</label>

      <button id="expandAll">Expand all</button>
      <button id="collapseAll">Collapse all</button>
      <button id="checkAll">Check visible</button>
      <button id="uncheckAll">Uncheck visible</button>
      <button id="reset" class="warn">Reset</button>
      <button id="export" class="acc">Export</button>
      <label class="toggle">Import<input type="file" id="import" accept="application/json" style="display:none"></label>

      <div class="progress" id="progress">0 of 0 checked</div>

      <span id="authStatus" style="margin-left:auto">Not signed in</span>
      <button id="btnSignIn" onclick="signIn()">Sign in with Google</button>
      <button id="btnSaveCloud" onclick="saveNow()" style="display:none">Save to Cloud</button>
      <button id="btnSignOut" onclick="signOutNow()" style="display:none">Sign out</button>
    </div>
  </div>
</header>
<main class="wrap">
  <div id="container"></div>
  <div class="footer">ðŸ’¡ Use the tabs to work section by section. Signedâ€‘in users autoâ€‘sync to Firestore; you can still Export/Import anytime.</div>
</main>
<script src="assets/data.js"></script>
<script>const PAGE = {};</script>
<script src="assets/app.js"></script>
<script>
const stateKey='college_movein_checklist_v3_multi_hp';
function saveState(s){ localStorage.setItem(stateKey, JSON.stringify(s)); }
function getState(){ try{return JSON.parse(localStorage.getItem(stateKey))||{}}catch(_){return {}} }
function rerender(){ if(window.render) render(); }

document.getElementById('expandAll').onclick=()=>{ document.querySelectorAll('details').forEach(d=>d.open=true); };
document.getElementById('collapseAll').onclick=()=>{ document.querySelectorAll('details').forEach(d=>d.open=false); };
document.getElementById('checkAll').onclick=()=>{ const s=getState(); document.querySelectorAll('input[type=checkbox]').forEach(cb=>{ if(cb.offsetParent){ cb.checked=true; const id=cb.dataset.id; s[id]=s[id]||{}; s[id].checked=true; } }); saveState(s); rerender(); };
document.getElementById('uncheckAll').onclick=()=>{ const s=getState(); document.querySelectorAll('input[type=checkbox]').forEach(cb=>{ if(cb.offsetParent){ cb.checked=false; const id=cb.dataset.id; s[id]=s[id]||{}; s[id].checked=false; } }); saveState(s); rerender(); };
document.getElementById('reset').onclick=()=>{ if(confirm('Clear all saved progress on this device?')){ localStorage.removeItem(stateKey); location.reload(); } };
document.getElementById('export').onclick=()=>{ const blob=new Blob([JSON.stringify(getState(),null,2)],{type:'application/json'}); const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='college_checklist_progress.json'; a.click(); URL.revokeObjectURL(url); };
document.getElementById('import').onchange=(e)=>{ const f=e.target.files[0]; if(!f) return; const r=new FileReader(); r.onload=()=>{ try{ const obj=JSON.parse(r.result); const merged={...getState(),...obj}; saveState(merged); rerender(); }catch(err){ alert('Invalid file'); } }; r.readAsText(f); };
</script>
<script type="module" src="assets/firebase-config.js"></script>
<script type="module" src="assets/auth.js"></script>
</body>
</html>